<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Modified Layout with Collapsible Top Content</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z7865Z3JTJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-Z7865Z3JTJ');
  </script>

  <!-- Custom fonts -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles -->
  <link href="css/sb-admin-2.min.css" rel="stylesheet">
  
  <style>
    #content-wrapper {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    #top-content {
      width: 100%;
      background-color: #f8f9fc;
      padding: 20px;
      box-sizing: border-box;
      transition: max-height 0.3s ease-out;
      overflow: hidden;
    }
    #top-content.collapsed {
      max-height: 0;
      padding: 0 20px;
    }
    .collapse-toggle {
      cursor: pointer;
      padding: 10px;
      background-color: #4e73df;
      color: white;
      text-align: center;
      border-radius: 0 0 5px 5px;
    }
    .collapse-toggle:hover {
      background-color: #2e59d9;
    }
    #bottom-content {
      width: 100%;
      background-color: #e9ecef;
      padding: 20px;
      box-sizing: border-box;
    }
  </style>
</head>

<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
      <!-- Keep the existing sidebar content from the original HTML -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fa fa-solid fa-hippo"></i>
        </div>
        <div class="sidebar-brand-text mx-3">TAM Demo</div>
      </a>

      <!-- Rest of the sidebar navigation items from the original HTML -->
      <li class="nav-item active">
        <a class="nav-link" href="index.html">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </a>
      </li>
      
      <!-- Include other sidebar items from the original HTML -->
      <!-- ... -->
    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Top Content Area -->
      <div id="top-content">
        <h2>Top Content Area</h2>
        <p>This is a full-width top section replacing the previous main content.</p>
      </div>
      
      <!-- Collapse Toggle -->
      <div class="collapse-toggle" onclick="toggleTopContent()">
        Toggle Top Content
      </div>

      <!-- Bottom Content Area -->
      <div id="bottom-content">
        <h2>Bottom Content Area</h2>
        <p>This is a full-width bottom section.</p>
      </div>

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2019</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
  </div>
  <!-- End of Page Wrapper -->

  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

  <!-- Collapsible Top Content Script -->
  <script>
    function toggleTopContent() {
      const topContent = document.getElementById('top-content');
      topContent.classList.toggle('collapsed');
    }
  </script>

  <!-- Intercom Script -->
  <script>
    window.intercomSettings = {
      api_base: "https://api-iam.intercom.io",
      app_id: "pjmruj7i",
      name: "<%= current_user.name %>", // Full name
      email: "<%= current_user.email %>", // Email address
      created_at: "<%= current_user.created_at.to_i %>" // Signup date as a Unix timestamp
    };
  </script>
  <script>
    (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/pjmruj7i';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(document.readyState==='complete'){l();}else if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
  </script>

  <!-- Pendo Script -->
  <script type="text/javascript" src="/pendo.js"></script>
</body>
</html>
